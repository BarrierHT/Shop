<%- include('../includes/head.ejs') %>

    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/products.css">

</head>

<body>
<%- include('../includes/navigation.ejs') %>

<%# Comment tag, no execution, no output %>

    <main class="main-product-form">

        <form class="product-form" action="/admin/<%=editing? 'edit-product' : 'add-product' %>" method="POST"> 
            <div>
                <h3>Insert your product</h3>
            </div>
            
            <div class="form-control">
                <label for="title">Title</label> 
                <% if(errorMessage.hasOwnProperty('title')){ %> 
                    <div class="user-message user-message--error">
                        Error: <%= errorMessage.title %>
                    </div>
                <% } %>  
                <input type="text" name="title"  placeholder="Write the title" id="title" value="<%=editing? product.title  : (oldInput ? userData.title : '') %>">
            </div>
            <div class="form-control">
                <label for="price">Price</label> 
                <% if(errorMessage.hasOwnProperty('price')){ %> 
                    <div class="user-message user-message--error">
                        Error: <%= errorMessage.price %>
                    </div>
                <% } %>  
                <input type="number" name="price"  placeholder="Write the price" id="price" step="0.01" value="<%=editing? product.price  : (oldInput ? userData.price : '') %>">  
            </div>
            <div class="form-control">
                <label for="description">Description</label> 
                <% if(errorMessage.hasOwnProperty('description')){ %> 
                    <div class="user-message user-message--error">
                        Error: <%= errorMessage.description %>
                    </div>
                <% } %>  
                <textarea name="description" id="description" placeholder="Write the description"><%=editing? product.description  : (oldInput ? userData.description : '')%></textarea>
            </div>
            <div class="form-control">
                <label for="imageUrl">Image URL</label> 
                <% if(errorMessage.hasOwnProperty('imageUrl')){ %> 
                    <div class="user-message user-message--error">
                        Error: <%= errorMessage.imageUrl %>
                    </div>
                <% } %>  
                <input type="text" name="imageUrl"  placeholder="Write the description" id="imageUrl" value="<%=editing? product.imageUrl  : (oldInput ? userData.imageUrl : '') %>">
            </div>
            <% if(editing) { %> <input type="hidden" value="<%=product._id%>" name="productId"> <% }%>
            
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button class="btn" type="submit"><%=editing? 'Update Product' : 'Add Product' %></button>
        </form> 

    </main>
    
<%- include('../includes/end.ejs') %>
